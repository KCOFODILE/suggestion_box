{# app/templates/_suggestions_list_content.html #}
<div id="suggestions-table" {# Existing table div #}
    class="bg-zinc-800 shadow-md rounded-lg overflow-hidden border border-zinc-700 overflow-x-auto md:block hidden">
    {# Added responsive classes #}
    <table class="min-w-full divide-y divide-zinc-700">
        <thead class="bg-zinc-700">
            <tr>
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Date</th>
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Category
                </th>
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Content
                </th>
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Submitter
                </th>
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Status
                </th>
                {# Reason: Add a column for actions, visible only to admin_full users #}
                {% if role == 'admin_full' %}
                <th
                    class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider sm:px-6 sm:py-3">
                    Actions
                </th>
                {% endif %}
            </tr>
        </thead>
        <tbody class="bg-zinc-800 divide-y divide-zinc-700">
            {% for suggestion in suggestions %}
            <tr>
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-400 sm:px-6 sm:py-4">
                    {{ suggestion.timestamp.strftime('%Y-%m-%d %H:%M') }}
                </td>
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-300 sm:px-6 sm:py-4">
                    {{ suggestion.category }}
                </td>
                <td class="px-4 py-2 text-sm text-gray-300 sm:px-6 sm:py-4">
                    {{ suggestion.content }}
                </td>
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-300 sm:px-6 sm:py-4">
                    {% if suggestion.is_anonymous %}
                    Anonymous
                    {% else %}
                    {{ suggestion.submitter_personnel_number }}
                    {% endif %}
                </td>
                <td class="px-4 py-2 whitespace-nowrap text-sm sm:px-6 sm:py-4">
                    {# Check if user role allows editing status #}
                    {% if role in ['admin_full', 'admin_view_only'] %}
                    {# Use the partial template to render the select #}
                    {# Pass the necessary variables using 'with context' #}
                    {% include '_suggestion_select.html' with context %}
                    {% else %}
                    {# Read-only view for other roles #}
                    <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                            {% if suggestion.status == 'New' %}bg-blue-800 text-blue-100{% elif suggestion.status == 'In Progress' %}bg-yellow-800 text-yellow-100{% elif suggestion.status == 'Resolved' %}bg-green-800 text-green-100{% elif suggestion.status == 'Rejected' %}bg-red-800 text-red-100{% endif %}">
                        {{ suggestion.status }}
                    </span>
                    {% endif %}
                </td>
                {# Reason: Add delete button, visible only to admin_full users #}
                {% if role == 'admin_full' %}
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-300 sm:px-6 sm:py-4">
                    <form action="{{ url_for('main.delete_suggestion', suggestion_id=suggestion.id) }}" method="POST">
                        <button type="submit" class="text-red-600 hover:text-red-700">Delete</button>
                    </form>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div> {# End existing table div #}

{# New div for mobile cards #}
<div class="md:hidden flex flex-col items-center"> {# Removed px-4 for full width #}
    {% for suggestion in suggestions %}
    {% set status_color_class = {
    'New': 'border-blue-600 shadow-blue-800',
    'In Progress': 'border-yellow-600 shadow-yellow-800',
    'Resolved': 'border-green-600 shadow-green-800',
    'Rejected': 'border-red-600 shadow-red-800'
    }.get(suggestion.status, 'border-zinc-700 shadow-zinc-800') %}
    <div class="bg-zinc-800 shadow-lg rounded-lg p-4 mb-4 w-full border-t-4 {{ status_color_class }}"> {#
        Adjusted padding, added w-full, border-t-4, and dynamic status color/shadow #}
        <div class="text-sm mb-1 text-center"> {# Adjusted margin and added text-center #}
            <span class="font-semibold text-gray-400"></span> {{ suggestion.timestamp.strftime('%Y-%m-%d
            %H:%M') }}
        </div>
        {# Removed Category line as per feedback #}
        <div class="text-sm mb-1 text-center"> {# Adjusted margin and added text-center #}
            <span class="font-semibold text-gray-400"></span> {{ suggestion.content }}
        </div>
        <div class="text-sm mb-1 text-center"> {# Adjusted margin and added text-center #}
            <span class="font-semibold text-gray-400"></span>
            {% if suggestion.is_anonymous %}
            Anonymous
            {% else %}
            {{ suggestion.submitter_personnel_number }}
            {% endif %}
        </div>
        <div class="text-sm mb-2 text-center"> {# Adjusted margin and added text-center #}
            {% if role in ['admin_full', 'admin_view_only'] %}
            {% include '_suggestion_select.html' with context %}
            {% else %}
            <span
                class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                    {% if suggestion.status == 'New' %}bg-blue-800 text-blue-100{% elif suggestion.status == 'In Progress' %}bg-yellow-800 text-yellow-100{% elif suggestion.status == 'Resolved' %}bg-green-800 text-green-100{% elif suggestion.status == 'Rejected' %}bg-red-800 text-red-100{% endif %}">
                {{ suggestion.status }}
            </span>
            {% endif %}
        </div>
        {% if role == 'admin_full' %}
        <div class="text-center"> {# Added text-center #}
            <form action="{{ url_for('main.delete_suggestion', suggestion_id=suggestion.id) }}" method="POST">
                <button type="submit" class="text-red-600 hover:text-red-700 text-sm">Delete</button>
            </form>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div> {# End new div for mobile cards #}